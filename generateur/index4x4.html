<!DOCTYPE html>
<html>
    <head>
        <meta charset='utf-8'>
        <script src="markers4x4.js" type="text/javascript"></script>
        <title>Générateur de marqueur Aruko</title>
    </head>
    <body>
        <h1>Générateur de marqueur Aruco 4×4</h1>
        <div>
            <input type="text" name="valeur" id="mid"><input type="button" value="Générer" onclick="genereMarker();">
        </div>
        <div id="marker">
        </div>
        <script>
                function genereMarker() {
                    var id = Number(document.getElementById("mid").value);
                    var width = 210, height = 210;
                    [canvas, blancs] = makeMarker(id, width, height);
                    var ctx = canvas.getContext('2d');
                    ctx.font = "bold 10px sans-serif";
                        ctx.fillStyle = 'grey';
                       ctx.save();
                       var lettres = ["A", "B", "C", "D"];
                       for (let i=0;i<4;i++){
                           ctx.fillText(lettres[i],canvas.width/2,10);
                           ctx.translate(canvas.width / 2, canvas.height / 2);
                           ctx.rotate(Math.PI/2);
                           ctx.translate(-canvas.width / 2, -canvas.height / 2);
                       }
                       ctx.restore();
                    document.getElementById("markercanvas").innerHTML = canvas;
                    var image = document.getElementById("image");
                    image.src = canvas.toDataURL("image/png");
                }
                
        </script>
        <div id="markercanvas" style="display: none;"></div>
        <div id="png-container"><img id="image" /></div>
    </body>
</html>
